{
  "project": "Refactorisation E2E Doucement",
  "description": "Migration complète des tests E2E vers fixtures centralisées et réactivation des tests skippés",
  "createdAt": "2026-01-14",
  "lastRelease": "1.28.0",
  "docs": [
    "docs/prd-e2e-refactoring.md",
    "e2e/SKIPPED_TESTS.md",
    "e2e/fixtures/index.ts"
  ],
  "phases": [
    {
      "id": "phase-1-features",
      "name": "Implémentation fonctionnalités manquantes",
      "description": "Implémenter les fonctionnalités UI nécessaires pour réactiver les tests skippés",
      "status": "completed",
      "releasedAs": "1.28.0",
      "releasedAt": "2026-01-15",
      "releaseType": "minor",
      "tasks": [
        {
          "id": "1.1",
          "name": "Habit stacking visuel sur Today",
          "description": "Grouper visuellement les habitudes chaînées via anchorHabitId. Utiliser les classes CSS existantes .today__habit-chain--connected et .today__habit-wrapper--chained",
          "status": "completed",
          "completedAt": "2026-01-15",
          "priority": "high",
          "dependsOn": [],
          "files": ["src/pages/Today.tsx", "src/pages/Today.css"],
          "tests": ["e2e/habit-stacking.spec.ts"],
          "acceptance": [
            "Les habitudes avec anchorHabitId sont visuellement reliées",
            "L'habitude ancre apparaît en premier de la chaîne",
            "Une indication visuelle montre le lien entre habitudes"
          ]
        },
        {
          "id": "1.2",
          "name": "Regroupement par moment de la journée",
          "description": "Afficher les habitudes groupées par timeOfDay (matin/après-midi/soir/nuit) en utilisant TimeOfDaySection existant",
          "status": "completed",
          "completedAt": "2026-01-15",
          "priority": "high",
          "dependsOn": [],
          "files": ["src/pages/Today.tsx"],
          "tests": ["e2e/habits-display.spec.ts"],
          "acceptance": [
            "Sections : Matin, Après-midi, Soir, Nuit visibles",
            "Habitudes correctement triées par moment",
            "Sections vides automatiquement masquées"
          ]
        },
        {
          "id": "1.3",
          "name": "Historique saisies cumulatives avec undo",
          "description": "Ajouter un composant pour voir et annuler les saisies cumulatives individuelles dans HabitCard",
          "status": "completed",
          "completedAt": "2026-01-15",
          "priority": "medium",
          "dependsOn": [],
          "files": ["src/components/habits/HabitCard.tsx", "src/components/habits/CumulativeHistory.tsx"],
          "tests": ["e2e/habit-modification.spec.ts"],
          "acceptance": [
            "Historique des saisies du jour visible",
            "Bouton d'annulation par saisie",
            "Mise à jour immédiate après annulation"
          ]
        }
      ]
    },
    {
      "id": "phase-2-page-objects",
      "name": "Page Objects additionnels",
      "description": "Créer les Page Objects manquants pour faciliter la migration",
      "status": "completed",
      "releaseType": "patch",
      "tasks": [
        {
          "id": "2.1",
          "name": "CreateHabitPage Page Object",
          "description": "Page Object pour le wizard de création d'habitude avec méthodes pour chaque étape",
          "status": "completed",
          "completedAt": "2026-01-15",
          "priority": "high",
          "dependsOn": [],
          "files": ["e2e/fixtures/pages/CreateHabitPage.ts", "e2e/fixtures/pages/index.ts"],
          "tests": [],
          "acceptance": [
            "Méthodes pour naviguer entre les 7 étapes du wizard",
            "Méthodes pour remplir les champs de chaque étape",
            "Export depuis fixtures/index.ts"
          ]
        },
        {
          "id": "2.2",
          "name": "StatisticsPage Page Object",
          "description": "Page Object pour la page statistiques avec sélecteur de période et graphiques",
          "status": "completed",
          "completedAt": "2026-01-15",
          "priority": "medium",
          "dependsOn": [],
          "files": ["e2e/fixtures/pages/StatisticsPage.ts", "e2e/fixtures/pages/index.ts"],
          "tests": [],
          "acceptance": [
            "Méthodes pour sélectionner la période",
            "Méthodes pour vérifier les graphiques",
            "Méthodes pour fermer les modales de célébration"
          ]
        },
        {
          "id": "2.3",
          "name": "WeeklyReviewPage Page Object",
          "description": "Page Object pour la page de revue hebdomadaire",
          "status": "completed",
          "completedAt": "2026-01-15",
          "priority": "medium",
          "dependsOn": [],
          "files": ["e2e/fixtures/pages/WeeklyReviewPage.ts", "e2e/fixtures/pages/index.ts"],
          "tests": [],
          "acceptance": [
            "Méthodes pour naviguer dans la revue",
            "Méthodes pour vérifier les statistiques",
            "Méthodes pour saisir une réflexion"
          ]
        }
      ]
    },
    {
      "id": "phase-3-migration-high",
      "name": "Migration specs haute priorité",
      "description": "Migrer les 5 specs avec le plus de duplication",
      "status": "in_progress",
      "releaseType": "patch",
      "tasks": [
        {
          "id": "3.1",
          "name": "Migrer habit-modification.spec.ts",
          "description": "Remplacer les données inline par createAppData/createHabit, utiliser setupLocalStorage",
          "status": "completed",
          "completedAt": "2026-01-15",
          "priority": "high",
          "dependsOn": ["1.3"],
          "files": ["e2e/habit-modification.spec.ts"],
          "tests": ["e2e/habit-modification.spec.ts"],
          "acceptance": [
            "Aucune donnée de test inline",
            "Utilise setupLocalStorage",
            "Tests skippés réactivés si 1.3 complété"
          ]
        },
        {
          "id": "3.2",
          "name": "Migrer habit-increase-weekly.spec.ts",
          "description": "Utiliser createWeeklyHabit et setupLocalStorage",
          "status": "completed",
          "completedAt": "2026-01-15",
          "priority": "high",
          "dependsOn": [],
          "files": ["e2e/habit-increase-weekly.spec.ts"],
          "tests": ["e2e/habit-increase-weekly.spec.ts"],
          "acceptance": [
            "Utilise createWeeklyHabit factory",
            "SchemaVersion 10 partout",
            "Tous les tests passent"
          ]
        },
        {
          "id": "3.3",
          "name": "Migrer habit-counter.spec.ts",
          "description": "Utiliser createCounterHabit et setupLocalStorage",
          "status": "completed",
          "completedAt": "2026-01-15",
          "priority": "high",
          "dependsOn": [],
          "files": ["e2e/habit-counter.spec.ts"],
          "tests": ["e2e/habit-counter.spec.ts"],
          "acceptance": [
            "Utilise createCounterHabit factory",
            "Aucune donnée inline",
            "Tous les tests passent"
          ]
        },
        {
          "id": "3.4",
          "name": "Migrer celebrations.spec.ts",
          "description": "Utiliser les fixtures et closeCelebrationModalIfVisible helper",
          "status": "pending",
          "priority": "high",
          "dependsOn": ["2.2"],
          "files": ["e2e/celebrations.spec.ts"],
          "tests": ["e2e/celebrations.spec.ts"],
          "acceptance": [
            "Utilise StatisticsPage si pertinent",
            "Utilise closeCelebrationModalIfVisible",
            "Tous les tests passent"
          ]
        },
        {
          "id": "3.5",
          "name": "Migrer statistics.spec.ts",
          "description": "Utiliser StatisticsPage Page Object et fixtures",
          "status": "pending",
          "priority": "high",
          "dependsOn": ["2.2"],
          "files": ["e2e/statistics.spec.ts"],
          "tests": ["e2e/statistics.spec.ts"],
          "acceptance": [
            "Utilise StatisticsPage Page Object",
            "Aucune donnée inline",
            "Tous les tests passent"
          ]
        }
      ]
    },
    {
      "id": "phase-4-migration-medium",
      "name": "Migration specs moyenne priorité",
      "description": "Migrer les 5 specs suivants",
      "status": "pending",
      "releaseType": "patch",
      "tasks": [
        {
          "id": "4.1",
          "name": "Migrer habit-maintain.spec.ts",
          "description": "Utiliser createMaintainHabit factory",
          "status": "pending",
          "priority": "medium",
          "dependsOn": [],
          "files": ["e2e/habit-maintain.spec.ts"],
          "tests": ["e2e/habit-maintain.spec.ts"],
          "acceptance": ["Utilise createMaintainHabit", "Tous les tests passent"]
        },
        {
          "id": "4.2",
          "name": "Migrer habit-decrease-zero.spec.ts",
          "description": "Utiliser createDecreaseHabit factory avec targetValue: 0",
          "status": "pending",
          "priority": "medium",
          "dependsOn": [],
          "files": ["e2e/habit-decrease-zero.spec.ts"],
          "tests": ["e2e/habit-decrease-zero.spec.ts"],
          "acceptance": ["Utilise createDecreaseHabit", "Tous les tests passent"]
        },
        {
          "id": "4.3",
          "name": "Migrer habit-decrease-daily.spec.ts",
          "description": "Utiliser createDecreaseHabit factory",
          "status": "pending",
          "priority": "medium",
          "dependsOn": [],
          "files": ["e2e/habit-decrease-daily.spec.ts"],
          "tests": ["e2e/habit-decrease-daily.spec.ts"],
          "acceptance": ["Utilise createDecreaseHabit", "Tous les tests passent"]
        },
        {
          "id": "4.4",
          "name": "Migrer habit-increase-daily.spec.ts",
          "description": "Utiliser createIncreaseHabit factory",
          "status": "pending",
          "priority": "medium",
          "dependsOn": [],
          "files": ["e2e/habit-increase-daily.spec.ts"],
          "tests": ["e2e/habit-increase-daily.spec.ts"],
          "acceptance": ["Utilise createIncreaseHabit", "Tous les tests passent"]
        },
        {
          "id": "4.5",
          "name": "Migrer onboarding.spec.ts",
          "description": "Utiliser createFreshAppData et setupFreshLocalStorage",
          "status": "pending",
          "priority": "medium",
          "dependsOn": [],
          "files": ["e2e/onboarding.spec.ts"],
          "tests": ["e2e/onboarding.spec.ts"],
          "acceptance": ["Utilise createFreshAppData", "Tous les tests passent"]
        }
      ]
    },
    {
      "id": "phase-5-migration-low",
      "name": "Migration specs basse priorité",
      "description": "Migrer les specs restants et réactiver tests skippés",
      "status": "pending",
      "releaseType": "patch",
      "tasks": [
        {
          "id": "5.1",
          "name": "Migrer create-habit.spec.ts",
          "description": "Utiliser CreateHabitPage Page Object",
          "status": "pending",
          "priority": "low",
          "dependsOn": ["2.1"],
          "files": ["e2e/create-habit.spec.ts"],
          "tests": ["e2e/create-habit.spec.ts"],
          "acceptance": ["Utilise CreateHabitPage", "Tous les tests passent"]
        },
        {
          "id": "5.2",
          "name": "Migrer weekly-review.spec.ts",
          "description": "Utiliser WeeklyReviewPage et createWeeklyReviewDueData",
          "status": "pending",
          "priority": "low",
          "dependsOn": ["2.3"],
          "files": ["e2e/weekly-review.spec.ts"],
          "tests": ["e2e/weekly-review.spec.ts"],
          "acceptance": ["Utilise WeeklyReviewPage", "Tous les tests passent"]
        },
        {
          "id": "5.3",
          "name": "Migrer planned-pause.spec.ts",
          "description": "Utiliser createPlannedPauseData factory",
          "status": "pending",
          "priority": "low",
          "dependsOn": [],
          "files": ["e2e/planned-pause.spec.ts"],
          "tests": ["e2e/planned-pause.spec.ts"],
          "acceptance": ["Utilise createPlannedPauseData", "Tous les tests passent"]
        },
        {
          "id": "5.4",
          "name": "Migrer i18n.spec.ts",
          "description": "Utiliser setupLocalStorage et fixtures",
          "status": "pending",
          "priority": "low",
          "dependsOn": [],
          "files": ["e2e/i18n.spec.ts"],
          "tests": ["e2e/i18n.spec.ts"],
          "acceptance": ["Utilise setupLocalStorage", "Tous les tests passent"]
        },
        {
          "id": "5.5",
          "name": "Migrer autres specs",
          "description": "Migrer suggestion-filters, habits-display, habit-weekly-aggregation, goal-reached, growth-plateau, absence-detection, habit-decrease-no-stacking",
          "status": "pending",
          "priority": "low",
          "dependsOn": ["1.1", "1.2"],
          "files": [
            "e2e/suggestion-filters.spec.ts",
            "e2e/habits-display.spec.ts",
            "e2e/habit-weekly-aggregation.spec.ts",
            "e2e/goal-reached.spec.ts",
            "e2e/growth-plateau.spec.ts",
            "e2e/absence-detection.spec.ts",
            "e2e/habit-decrease-no-stacking.spec.ts"
          ],
          "tests": [],
          "acceptance": [
            "Tous les specs utilisent fixtures centralisées",
            "Tests skippés dans habits-display réactivés",
            "Tous les tests passent"
          ]
        },
        {
          "id": "5.6",
          "name": "Réactiver habit-stacking.spec.ts",
          "description": "Supprimer le skip et ajuster les tests après implémentation 1.1",
          "status": "completed",
          "completedAt": "2026-01-15",
          "priority": "low",
          "dependsOn": ["1.1"],
          "files": ["e2e/habit-stacking.spec.ts"],
          "tests": ["e2e/habit-stacking.spec.ts"],
          "acceptance": ["Plus de test.describe.skip", "Tous les tests passent"]
        }
      ]
    },
    {
      "id": "phase-6-cleanup",
      "name": "Nettoyage et validation finale",
      "description": "Vérification finale, suppression documentation obsolète, validation complète",
      "status": "pending",
      "releaseType": "patch",
      "tasks": [
        {
          "id": "6.1",
          "name": "Exécuter tous les tests E2E",
          "description": "Lancer npm run test:e2e et corriger les éventuels échecs",
          "status": "pending",
          "priority": "high",
          "dependsOn": ["5.5", "5.6"],
          "files": [],
          "tests": ["e2e/**/*.spec.ts"],
          "acceptance": ["Tous les tests passent", "Aucun test skippé"]
        },
        {
          "id": "6.2",
          "name": "Supprimer SKIPPED_TESTS.md",
          "description": "Supprimer la documentation des tests skippés car plus nécessaire",
          "status": "pending",
          "priority": "low",
          "dependsOn": ["6.1"],
          "files": ["e2e/SKIPPED_TESTS.md"],
          "tests": [],
          "acceptance": ["Fichier supprimé", "Aucune référence restante"]
        },
        {
          "id": "6.3",
          "name": "Mise à jour documentation",
          "description": "Mettre à jour CLAUDE.md avec les nouvelles instructions pour les tests E2E",
          "status": "pending",
          "priority": "low",
          "dependsOn": ["6.1"],
          "files": ["CLAUDE.md"],
          "tests": [],
          "acceptance": [
            "Section E2E mise à jour",
            "Exemples d'utilisation des fixtures",
            "Instructions pour créer de nouveaux tests"
          ]
        }
      ]
    }
  ],
  "stats": {
    "totalTasks": 24,
    "completed": 10,
    "inProgress": 0,
    "pending": 14,
    "blocked": 0
  }
}
