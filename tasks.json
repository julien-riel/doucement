{
  "project": "Refactoring Architectural",
  "description": "Amélioration de la maintenabilité et robustesse du codebase suite à l'audit architectural",
  "createdAt": "2026-01-15",
  "lastRelease": "1.29.0",
  "docs": [
    "docs/prd-architecture-refactoring.md",
    "docs/ARCHITECTURE.md",
    "docs/design/design-system-specification.md"
  ],
  "phases": [
    {
      "id": "phase-1-quick-wins",
      "name": "Corrections rapides",
      "description": "Corrections simples qui n'impactent pas l'architecture globale",
      "status": "completed",
      "releaseType": "patch",
      "releasedAs": "1.28.6",
      "releasedAt": "2026-01-15",
      "tasks": [
        {
          "id": "1.1",
          "name": "Corriger useDebugMode état mutable",
          "description": "Remplacer les variables module-level (tapCount, tapTimer) par des useRef pour être compatible React Strict Mode",
          "status": "completed",
          "completedAt": "2026-01-15",
          "priority": "high",
          "dependsOn": [],
          "files": ["src/hooks/useDebugMode.ts"],
          "tests": [],
          "acceptance": [
            "Aucune variable let/var au niveau module",
            "Utilisation de useRef pour tapCount et tapTimer",
            "Le mode debug fonctionne toujours (7 taps)",
            "npm run typecheck passe"
          ]
        },
        {
          "id": "1.2",
          "name": "Ajouter logging erreurs AppProvider",
          "description": "Logger les erreurs de parsing localStorage au lieu de les ignorer silencieusement",
          "status": "completed",
          "completedAt": "2026-01-15",
          "priority": "high",
          "dependsOn": [],
          "files": ["src/components/AppProvider.tsx"],
          "tests": [],
          "acceptance": [
            "console.error appelé en cas d'erreur de parsing",
            "Message d'erreur descriptif avec contexte",
            "Comportement graceful préservé (app continue de fonctionner)"
          ]
        },
        {
          "id": "1.3",
          "name": "Créer ErrorBoundary générique",
          "description": "Composant ErrorBoundary pour capturer les erreurs de rendu React et afficher un fallback",
          "status": "completed",
          "completedAt": "2026-01-15",
          "priority": "medium",
          "dependsOn": [],
          "files": ["src/components/ErrorBoundary.tsx", "src/components/index.ts"],
          "tests": [],
          "acceptance": [
            "Composant class avec componentDidCatch",
            "Props: children, fallback (optionnel), onError callback",
            "Fallback par défaut user-friendly",
            "Export depuis components/index.ts"
          ]
        },
        {
          "id": "1.4",
          "name": "Intégrer ErrorBoundary dans App",
          "description": "Wrapper l'application avec ErrorBoundary au niveau racine",
          "status": "completed",
          "completedAt": "2026-01-15",
          "priority": "medium",
          "dependsOn": ["1.3"],
          "files": ["src/App.tsx"],
          "tests": [],
          "acceptance": [
            "ErrorBoundary englobe le contenu principal",
            "Erreurs de rendu capturées et affichées proprement",
            "npm run build passe"
          ]
        }
      ]
    },
    {
      "id": "phase-2-hook-habitform",
      "name": "Hook useHabitForm",
      "description": "Création du hook partagé pour la logique de formulaire d'habitude",
      "status": "completed",
      "releaseType": "minor",
      "releasedAs": "1.29.0",
      "releasedAt": "2026-01-15",
      "tasks": [
        {
          "id": "2.1",
          "name": "Extraire types HabitFormState",
          "description": "Déplacer les types de formulaire de CreateHabit/types.ts vers un fichier partagé",
          "status": "completed",
          "completedAt": "2026-01-15",
          "priority": "high",
          "dependsOn": [],
          "files": ["src/types/habitForm.ts", "src/types/index.ts", "src/pages/CreateHabit/types.ts"],
          "tests": [],
          "acceptance": [
            "Nouveau fichier src/types/habitForm.ts avec HabitFormState",
            "CreateHabit/types.ts importe depuis types/habitForm.ts",
            "Pas de duplication de types",
            "npm run typecheck passe"
          ]
        },
        {
          "id": "2.2",
          "name": "Créer useHabitForm hook",
          "description": "Hook réutilisable pour la gestion d'état et validation des formulaires d'habitude",
          "status": "completed",
          "completedAt": "2026-01-15",
          "priority": "high",
          "dependsOn": ["2.1"],
          "files": ["src/hooks/useHabitForm.ts", "src/hooks/index.ts"],
          "tests": ["src/hooks/useHabitForm.test.ts"],
          "acceptance": [
            "Options: initialHabit (pour édition), mode ('create' | 'edit')",
            "Retourne: form, updateField, resetForm, isValid, hasChanges, errors",
            "Logique de validation commune",
            "Détection des changements pour mode edit",
            "Tests unitaires couvrant create et edit modes"
          ]
        },
        {
          "id": "2.3",
          "name": "Intégrer useHabitForm dans EditHabit",
          "description": "Remplacer les 25+ useState par useHabitForm dans EditHabit.tsx",
          "status": "completed",
          "completedAt": "2026-01-15",
          "priority": "high",
          "dependsOn": ["2.2"],
          "files": ["src/pages/EditHabit.tsx"],
          "tests": ["e2e/habit-modification.spec.ts"],
          "acceptance": [
            "Suppression des useState redondants",
            "Utilisation de useHabitForm avec mode 'edit'",
            "hasChanges calculé par le hook",
            "Tests E2E edit-habit passent"
          ]
        }
      ]
    },
    {
      "id": "phase-3-edithabit-refactor",
      "name": "Refactoring EditHabit",
      "description": "Découpage de EditHabit.tsx en composants modulaires",
      "status": "completed",
      "releaseType": "minor",
      "tasks": [
        {
          "id": "3.1",
          "name": "Créer structure EditHabit/",
          "description": "Créer le répertoire et les fichiers de base pour EditHabit modulaire",
          "status": "completed",
          "completedAt": "2026-01-15",
          "priority": "high",
          "dependsOn": ["2.3"],
          "files": [
            "src/pages/EditHabit/index.tsx",
            "src/pages/EditHabit/EditHabitContext.tsx",
            "src/pages/EditHabit/types.ts"
          ],
          "tests": [],
          "acceptance": [
            "Structure similaire à CreateHabit/",
            "Context pour l'état du formulaire",
            "index.tsx < 200 lignes"
          ]
        },
        {
          "id": "3.2",
          "name": "Extraire sections de formulaire",
          "description": "Créer des composants réutilisables pour les sections de formulaire (DirectionSelector, ProgressionConfig, etc.)",
          "status": "completed",
          "completedAt": "2026-01-15",
          "priority": "medium",
          "dependsOn": ["3.1"],
          "files": [
            "src/pages/EditHabit/sections/DirectionSection.tsx",
            "src/pages/EditHabit/sections/ProgressionSection.tsx",
            "src/pages/EditHabit/sections/TrackingSection.tsx",
            "src/pages/EditHabit/sections/IntentionSection.tsx",
            "src/pages/EditHabit/sections/IdentitySection.tsx",
            "src/pages/EditHabit/sections/index.ts"
          ],
          "tests": [],
          "acceptance": [
            "Chaque section < 150 lignes",
            "Props typées avec interface",
            "Réutilisables potentiellement pour CreateHabit"
          ]
        },
        {
          "id": "3.3",
          "name": "Supprimer ancien EditHabit.tsx",
          "description": "Remplacer src/pages/EditHabit.tsx par le répertoire modulaire",
          "status": "completed",
          "completedAt": "2026-01-15",
          "priority": "high",
          "dependsOn": ["3.2"],
          "files": ["src/pages/EditHabit.tsx", "src/pages/EditHabit.css"],
          "tests": ["e2e/habit-modification.spec.ts"],
          "acceptance": [
            "Ancien fichier supprimé",
            "Import dans router.tsx mis à jour",
            "CSS déplacé vers EditHabit/EditHabit.css",
            "Tous les tests E2E passent"
          ]
        }
      ]
    },
    {
      "id": "phase-4-documentation",
      "name": "Documentation architecture",
      "description": "Mise à jour de la documentation architecturale",
      "status": "completed",
      "releaseType": "patch",
      "tasks": [
        {
          "id": "4.1",
          "name": "Documenter architecture 3-tier",
          "description": "Ajouter une section dans ARCHITECTURE.md expliquant le système de gestion d'état à 3 niveaux",
          "status": "completed",
          "completedAt": "2026-01-15",
          "priority": "medium",
          "dependsOn": [],
          "files": ["docs/ARCHITECTURE.md"],
          "tests": [],
          "acceptance": [
            "Section 'Gestion d'état 3-tier' avec diagramme Mermaid",
            "Explication des 3 niveaux: local (useState), hooks, localStorage",
            "Justification du choix (pas de Redux/Zustand)",
            "Exemples de quand utiliser chaque niveau"
          ]
        },
        {
          "id": "4.2",
          "name": "Documenter patterns de hooks",
          "description": "Ajouter une section sur les patterns de hooks utilisés dans le projet",
          "status": "completed",
          "completedAt": "2026-01-15",
          "priority": "low",
          "dependsOn": ["2.2"],
          "files": ["docs/ARCHITECTURE.md"],
          "tests": [],
          "acceptance": [
            "Section 'Patterns de hooks' ajoutée",
            "Exemples: useHabitForm, useAppData, useCelebrations",
            "Conventions de nommage documentées"
          ]
        }
      ]
    },
    {
      "id": "phase-5-validation",
      "name": "Validation finale",
      "description": "Tests et vérifications finales",
      "status": "pending",
      "releaseType": "patch",
      "tasks": [
        {
          "id": "5.1",
          "name": "Exécuter suite de tests complète",
          "description": "Lancer tous les tests unitaires et E2E pour valider le refactoring",
          "status": "pending",
          "priority": "high",
          "dependsOn": ["3.3", "4.1"],
          "files": [],
          "tests": ["src/**/*.test.ts", "e2e/**/*.spec.ts"],
          "acceptance": [
            "npm test passe (tests unitaires)",
            "npm run test:e2e passe (tests E2E)",
            "npm run typecheck passe",
            "npm run lint passe"
          ]
        },
        {
          "id": "5.2",
          "name": "Health check",
          "description": "Exécuter le script de health check du projet",
          "status": "pending",
          "priority": "medium",
          "dependsOn": ["5.1"],
          "files": [],
          "tests": [],
          "acceptance": [
            "./scripts/health-check.sh passe",
            "Aucun warning nouveau introduit",
            "Documentation à jour"
          ]
        }
      ]
    }
  ],
  "stats": {
    "totalTasks": 15,
    "completed": 12,
    "inProgress": 0,
    "pending": 3,
    "blocked": 0
  }
}
